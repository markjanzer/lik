var edges = [
  {"group":"edges","data":{"id":"rec0JNcCR6mWbIUC4","source":"reckvpdIs6Xuq1HVj","target":"recI4GQgm65zG0mWf","weight":6}},
  {"group":"edges","data":{"id":"rec0NGLEXI55bl58C","source":"recdeN9izKLz6FxLx","target":"recVEelstSUtfbWsw","weight":6}},
  {"group":"edges","data":{"id":"rec1ASlwlu2xJo1wR","source":"rec0vNdSsnZkIcA4X","target":"recpPTjrPCoWEqHqc","weight":10}},
  {"group":"edges","data":{"id":"rec1IKaza0cMlDGGU","source":"rec0vNdSsnZkIcA4X","target":"recwYr1BR7SJOhV2K","weight":10}},
  {"group":"edges","data":{"id":"rec1TjZXu5iXahNKc","source":"recyyC3ERyaf28Xn6","target":"reciaFs54NU3QcW5a","weight":10}},
  {"group":"edges","data":{"id":"rec27JwtK79KBBrVe","source":"reczsYyfXWbFv1v1d","target":"recBe3PY2ElHu4G6x","weight":6}},
  {"group":"edges","data":{"id":"rec2DLayIjgYHioWi","source":"recH91UnZq5M46BN2","target":"rec9HUG3nu1eZHs1L","weight":12}},
  {"group":"edges","data":{"id":"rec2LQtgpZT0IJ4GP","source":"recS58DmkLKu2grR9","target":"recuYrPcvwNMSr4Sy","weight":10}},
  {"group":"edges","data":{"id":"rec2WnLuWLHPQLD3E","source":"rec8sFmzq4bUF9g3D","target":"recCBGfwxnRisN5v6","weight":14}},
  {"group":"edges","data":{"id":"rec2bt9z4VTUpREmG","source":"recH91UnZq5M46BN2","target":"recEVTjwd7ySM8R4J","weight":8}},
  {"group":"edges","data":{"id":"rec2qRiPJ53ZxGJaX","source":"reczsYyfXWbFv1v1d","target":"recppuCcNqM6FkJyH","weight":10}},
  {"group":"edges","data":{"id":"rec2wrbmyEGPQ2ABu","source":"recS58DmkLKu2grR9","target":"reca2z9JHoJ599b0e","weight":4}},
  {"group":"edges","data":{"id":"rec3TXoucMsTcZoqy","source":"recdeN9izKLz6FxLx","target":"recI4GQgm65zG0mWf","weight":8}},
  {"group":"edges","data":{"id":"rec3opKSqxKwpdERy","source":"reckvpdIs6Xuq1HVj","target":"reclgFxnI22C1BFhd","weight":8}},
  {"group":"edges","data":{"id":"rec6lJJCtSj5tcE1w","source":"recZbKFnM0QfVkOmm","target":"recY743bibqUglxhX","weight":12}},
  {"group":"edges","data":{"id":"rec6uqSakNTVMIvTk","source":"recZbKFnM0QfVkOmm","target":"recBxv0fvY0pkuVkJ","weight":2}},
  {"group":"edges","data":{"id":"rec71wOlX28VSsdFv","source":"recLsI9cI3dAimpvR","target":"recwgjsitkTZuMC7l","weight":6}},
  {"group":"edges","data":{"id":"rec7kZFoLjSI5eCzh","source":"recdeN9izKLz6FxLx","target":"reca2z9JHoJ599b0e","weight":6}},
  {"group":"edges","data":{"id":"rec7xjLnAKzN6ERew","source":"recLsI9cI3dAimpvR","target":"recB9zg5H5TwGtp7e","weight":6}},
  {"group":"edges","data":{"id":"rec8Pl85i9cHw1her","source":"recyMPEnGXy97mxll","target":"recQVcnBLRQycKSkz","weight":6}},
  {"group":"edges","data":{"id":"rec9D2aCRZvPNiKeH","source":"receqRQ6G8fmCtEVx","target":"recBxv0fvY0pkuVkJ","weight":10}},
  {"group":"edges","data":{"id":"rec9NeSpmujJBPN1r","source":"rec0vNdSsnZkIcA4X","target":"recuYrPcvwNMSr4Sy","weight":4}},
  {"group":"edges","data":{"id":"rec9Pb5y4ojummE7V","source":"rec8sFmzq4bUF9g3D","target":"recwkWJhG5WlEHqAw","weight":10}},
  {"group":"edges","data":{"id":"rec9rLBZHaHadksgE","source":"recyyC3ERyaf28Xn6","target":"recwnb2NblRpgcTQH","weight":10}},
  {"group":"edges","data":{"id":"recAiP9sQ1OfNqnjH","source":"recdeN9izKLz6FxLx","target":"recIhXSA4YZRwrq4w","weight":4}},
  {"group":"edges","data":{"id":"recCMqdXGRrtSVDKM","source":"reczsYyfXWbFv1v1d","target":"recwgjsitkTZuMC7l","weight":4}},
  {"group":"edges","data":{"id":"recCvRVejxOguooa1","source":"recZbKFnM0QfVkOmm","target":"rec4lvBafSjpf6iUm","weight":2}},
  {"group":"edges","data":{"id":"recDm306cWWKenTlK","source":"reczsYyfXWbFv1v1d","target":"recB9zg5H5TwGtp7e","weight":4}},
  {"group":"edges","data":{"id":"recEdeBYJrCTtSrGS","source":"reckvpdIs6Xuq1HVj","target":"recG4t1WiOR1DM2tc","weight":8}},
  {"group":"edges","data":{"id":"recHP57nEp0j32nHw","source":"recyMPEnGXy97mxll","target":"recOz4xQj9DEV4olt","weight":8}},
  {"group":"edges","data":{"id":"recHYEwysBnG40GQ6","source":"recyMPEnGXy97mxll","target":"rec4lvBafSjpf6iUm","weight":8}},
  {"group":"edges","data":{"id":"recJUvMHN2BSmQYmT","source":"recS58DmkLKu2grR9","target":"recVEelstSUtfbWsw","weight":4}},
  {"group":"edges","data":{"id":"recJv9kMZ2Ug2R63d","source":"recyyC3ERyaf28Xn6","target":"recppuCcNqM6FkJyH","weight":4}},
  {"group":"edges","data":{"id":"recMxqv6u6ex0PF9J","source":"recS58DmkLKu2grR9","target":"recstZnrrXgGG0YOa","weight":6}},
  {"group":"edges","data":{"id":"recPOuOv4OGzh4aJx","source":"recZbKFnM0QfVkOmm","target":"rectMuASyozV4jN2j","weight":8}},
  {"group":"edges","data":{"id":"recQKOKGRQpV7Up8W","source":"receqRQ6G8fmCtEVx","target":"recY743bibqUglxhX","weight":4}},
  {"group":"edges","data":{"id":"recTuwL9rjG5MOLWc","source":"recLsI9cI3dAimpvR","target":"recQVcnBLRQycKSkz","weight":8}},
  {"group":"edges","data":{"id":"recVvb9a4z5YVqfL7","source":"receqRQ6G8fmCtEVx","target":"rec7EU4KfVep7D6Sa","weight":10}},
  {"group":"edges","data":{"id":"receWX5Xzrv9GX4yx","source":"recH91UnZq5M46BN2","target":"recG4t1WiOR1DM2tc","weight":2}},
  {"group":"edges","data":{"id":"recjhpl1P1jwHUx8G","source":"recLsI9cI3dAimpvR","target":"recxRi3kOFTsWucav","weight":4}},
  {"group":"edges","data":{"id":"recmVgISpv5xEUxYo","source":"reckvpdIs6Xuq1HVj","target":"recIhXSA4YZRwrq4w","weight":2}},
  {"group":"edges","data":{"id":"recpIeg2vBW8a74L5","source":"recyMPEnGXy97mxll","target":"recxRi3kOFTsWucav","weight":2}},
  {"group":"edges","data":{"id":"recsM28i8kCF1CGbE","source":"recH91UnZq5M46BN2","target":"reclgFxnI22C1BFhd","weight":2}}
];

// https://stackoverflow.com/questions/4270485/drawing-lines-on-html-page
function createLineElement(x, y, length, angle, lineWidth, lineColor) {
  var line = document.createElement("div");
  var styles = 'border: ' + lineWidth + 'px solid ' + lineColor + '; '
             + 'width: ' + (length - lineWidth * 2).toString() + 'px; '
             + 'height: 0px; '
             + '-moz-transform: rotate(' + angle + 'rad); '
             + '-webkit-transform: rotate(' + angle + 'rad); '
             + '-o-transform: rotate(' + angle + 'rad); '  
             + '-ms-transform: rotate(' + angle + 'rad); '  
             + 'position: absolute; '
             + 'top: ' + y + 'px; '
             + 'left: ' + x + 'px; '
             + 'background-color: ' + lineColor + '; ';
  line.setAttribute('style', styles);
  return line;
}

function createLine(x1, y1, x2, y2, lineWidth, lineColor) {
  var a = x1 - x2,
      b = y1 - y2,
      c = Math.sqrt(a * a + b * b);

  var sx = (x1 + x2) / 2,
      sy = (y1 + y2) / 2;

  var x = sx - c / 2,
      y = sy;

  var alpha = Math.PI - Math.atan2(-b, a);

  return createLineElement(x, y, c, alpha, lineWidth, lineColor);
}

// https://stackoverflow.com/questions/8027875/how-to-find-the-elements-x-center-coordinates-and-related-window-offset
function getCenter(node) {
  var centerX = node.offsetLeft + node.offsetWidth / 2;
  var centerY = node.offsetTop + node.offsetHeight / 2;
  return [centerX, centerY];
}

function createLineFromEdge(edgeData) {
  var interval = $("#" + edgeData.data.source)
  var intervalNode = interval.querySelector(".node__visual")
  var intervalNodeCenter = getCenter(intervalNode);
  var intervalNodeCenterX = intervalNodeCenter[0];
  var intervalNodeCenterY = intervalNodeCenter[1];

  var shape = $("#" + edgeData.data.target);
  var shapeNode = shape.querySelector(".node__visual");
  var shapeNodeCenter = getCenter(shapeNode);
  var shapeNodeCenterX = shapeNodeCenter[0];
  var shapeNodeCenterY = shapeNodeCenter[1];

  var lineWidth = edgeData.data.weight / 2;
  var lineColor = intervalNode.style.backgroundColor;

  var line = createLine(intervalNodeCenterX, intervalNodeCenterY, shapeNodeCenterX, shapeNodeCenterY, lineWidth, lineColor);
  var canvas = $(".intervals-shapes-graph")[0];
  canvas.appendChild(line);
}

edges.forEach(edge => {
  createLineFromEdge(edge);
})






